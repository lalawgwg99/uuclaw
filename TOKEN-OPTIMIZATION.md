# Token å„ªåŒ–ç­–ç•¥å°æ¯”

## æˆ‘å€‘çš„é…ç½® vs æ–‡ç« å»ºè­°

### âœ… æˆ‘å€‘å·²ç¶“åšå°çš„

| å„ªåŒ–é … | æˆ‘å€‘çš„é…ç½® | æ•ˆæœ |
|--------|-----------|------|
| **ä¸»æ¨¡å‹** | Gemini 2.5 Flash Lite | æ¯” Claude Opus ä¾¿å®œ 60 å€ |
| **Sub-agents** | Trinity Large (å…è²») | 0 æˆæœ¬ |
| **Workspace æ–‡ä»¶** | å·²ç²¾ç°¡ < 10KB | æ¯æ¬¡æ³¨å…¥ < 2000 tokens |
| **Heartbeat æ¨¡å‹** | Gemini (ä¾¿å®œ) | ä¸ç”¨ Opus åšå¿ƒè·³ |
| **Sub-agent ä¸¦ç™¼** | 3 å€‹ | éš”é›¢ä¸Šä¸‹æ–‡ï¼Œé¿å…çˆ†ç‚¸ |

### ğŸ†• å‰›å‰›æ–°å¢çš„å„ªåŒ–

| å„ªåŒ–é … | é…ç½® | ç¯€çœæ•ˆæœ |
|--------|------|---------|
| **Prompt Caching** | cacheRetention: "long" | ç¯€çœ 90% è¼¸å…¥æˆæœ¬ |
| **Context Pruning** | ä¿ç•™ 55 åˆ†é˜å°è©± | é¿å…ä¸Šä¸‹æ–‡ç„¡é™å¢é•· |
| **Compaction** | è‡ªå‹•å£“ç¸® + ä¿å­˜è¨˜æ†¶ | é•·å°è©±ä¸ä¸Ÿä¿¡æ¯ |
| **Heartbeat å„ªåŒ–** | 55 åˆ†é˜ + æ·±å¤œéœé»˜ | ä¿æŒç·©å­˜æº«æš–ï¼Œä¸æµªè²» |
| **Memory Search** | ç²¾æº–æª¢ç´¢ | ç¯€çœ 90% è¨˜æ†¶è®€å– |

## Token æ¶ˆè€—å…¬å¼

```
Token æ¶ˆè€— = (è¼¸å…¥ + è¼¸å‡º) Ã— èª¿ç”¨æ¬¡æ•¸ Ã— æ¨¡å‹åƒ¹æ ¼
```

### æˆ‘å€‘çš„å„ªåŒ–ç­–ç•¥

#### 1. è¼¸å…¥å„ªåŒ–ï¼ˆæœ€é‡è¦ï¼‰
- âœ… Workspace æ–‡ä»¶ç²¾ç°¡ï¼ˆ< 10KBï¼‰
- âœ… Prompt Cachingï¼ˆç¯€çœ 90%ï¼‰
- âœ… Memory Searchï¼ˆåªè®€ç›¸é—œç‰‡æ®µï¼‰
- âœ… Sub-agents éš”é›¢ä¸Šä¸‹æ–‡

#### 2. èª¿ç”¨å„ªåŒ–
- âœ… Heartbeat 55 åˆ†é˜ï¼ˆä¸æ˜¯ 30 åˆ†é˜ï¼‰
- âœ… æ·±å¤œéœé»˜ï¼ˆ23:00-08:00ï¼‰
- âš ï¸ æ²’æœ‰ Cron ä»»å‹™ï¼ˆå¦‚æœæœ‰è¦å„ªåŒ–ï¼‰

#### 3. æ¨¡å‹é¸æ“‡
- âœ… ä¸»æ¨¡å‹ï¼šGeminiï¼ˆä¾¿å®œï¼‰
- âœ… Sub-agentsï¼šTrinityï¼ˆå…è²»ï¼‰
- âœ… å¯æ‰‹å‹•åˆ‡æ›ï¼šMiniMaxï¼ˆè¾¦å…¬ï¼‰ã€Stepï¼ˆé•·æ–‡æª”ï¼‰

## æˆæœ¬å°æ¯”ï¼ˆå‡è¨­æ¯å¤© 100 æ¬¡å°è©±ï¼‰

### ä½¿ç”¨ Claude Opusï¼ˆæ–‡ç« æ¡ˆä¾‹ï¼‰
- è¼¸å…¥ï¼š20K tokens Ã— 100 æ¬¡ = 2M tokens
- è¼¸å‡ºï¼š2K tokens Ã— 100 æ¬¡ = 200K tokens
- æˆæœ¬ï¼šç´„ $60-80/å¤©

### ä½¿ç”¨æˆ‘å€‘çš„é…ç½®
- ä¸»æ¨¡å‹ï¼šGeminiï¼ˆä¾¿å®œ 60 å€ï¼‰
- Prompt Cachingï¼šè¼¸å…¥æˆæœ¬ -90%
- Sub-agentsï¼šTrinityï¼ˆå…è²»ï¼‰
- æˆæœ¬ï¼šç´„ $1-3/å¤©

**ç¯€çœï¼š95%+**

## é€²éšå„ªåŒ–ï¼ˆå¯é¸ï¼‰

### å¦‚æœæƒ³é€²ä¸€æ­¥å„ªåŒ–

1. **å®‰è£ qmdï¼ˆèªç¾©æœç´¢ï¼‰**
   ```bash
   npm install -g https://github.com/tobi/qmd
   cd /Users/jazzxx/Desktop/OpenClaw/workspace
   qmd collection add . --name main-workspace --mask "**/*.md"
   qmd embed
   ```

2. **é…ç½® qmd backend**
   - æ¯” Memory Search æ›´å¼·å¤§
   - å¯ä»¥ç´¢å¼•é¡å¤–çš„çŸ¥è­˜åº«
   - 93% æº–ç¢ºç‡

3. **å®šæœŸæ¸…ç† memory/**
   ```bash
   # åˆªé™¤ 30 å¤©å‰çš„è¨˜æ†¶æ–‡ä»¶
   find /Users/jazzxx/Desktop/OpenClaw/workspace/memory -name "*.md" -mtime +30 -delete
   ```

## ç›£æ§ Token ä½¿ç”¨

åœ¨ Telegram ä¸­ï¼š
- `/stats` - æŸ¥çœ‹ä½¿ç”¨çµ±è¨ˆ
- `/compact` - æ‰‹å‹•å£“ç¸®ä¸Šä¸‹æ–‡
- `/model` - æŸ¥çœ‹ç•¶å‰æ¨¡å‹

## ç¸½çµ

æˆ‘å€‘çš„é…ç½®å·²ç¶“éå¸¸çœ tokenï¼š
- âœ… ç”¨ä¾¿å®œ/å…è²»æ¨¡å‹
- âœ… Workspace æ–‡ä»¶ç²¾ç°¡
- âœ… å•Ÿç”¨ Prompt Caching
- âœ… è‡ªå‹•ä¿®å‰ªå’Œå£“ç¸®
- âœ… ç²¾æº–è¨˜æ†¶æª¢ç´¢

**é æœŸç¯€çœï¼š60-80% Token æ¶ˆè€—**
**ç›¸æ¯” Claude Opus é…ç½®ï¼šç¯€çœ 95%+**
