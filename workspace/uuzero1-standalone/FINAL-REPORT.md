# UUZero Standalone - æœ€çµ‚äº¤ä»˜å ±å‘Š

## ğŸ¯ ä»»å‹™å®Œæˆç‹€æ…‹

âœ… **æ‰€æœ‰ä»»å‹™å·²å®Œæˆ** - ç¨ç«‹å…¨è‡ªå‹•è½åœ°ç‰ˆæœ¬å·²æº–å‚™å°±ç·’

---

## ğŸ“¦ äº¤ä»˜å…§å®¹

### 1. æ ¸å¿ƒç³»çµ±
```
uuzero1-standalone/
â”œâ”€â”€ server.js              # HTTP + WebSocket ä¸»ä¼ºæœå™¨ï¼ˆå®Œå–„ç‰ˆï¼‰
â”œâ”€â”€ standalone.js          # CLI äº¤äº’æ¨¡å¼è¿è¡Œå™¨
â”œâ”€â”€ autodebug.js          # è‡ªå‹• Debug & Sanity Check å·¥å…·
â”œâ”€â”€ validate.js           # æœ€çµ‚é©—è­‰æ¸¬è©¦å¥—ä»¶
â”œâ”€â”€ package.json          # ä¸»å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ config/
â”‚   â””â”€â”€ router-config.json # è·¯ç”±å™¨é…ç½®ï¼ˆå¯è‡ªå®šç¾©ï¼‰
â”œâ”€â”€ modules/router/       # æ ¸å¿ƒæ™ºèƒ½è·¯ç”±æ¨¡å¡Š
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ dist/
â”‚   â”‚   â”œâ”€â”€ cli.js        # CLI å…¥å£
â”‚   â”‚   â”œâ”€â”€ router.js     # è·¯ç”±å¼•æ“
â”‚   â”‚   â”œâ”€â”€ inference.js  # ä»»å‹™é¡å‹æ¨æ–·
â”‚   â”‚   â”œâ”€â”€ config.js     # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ circuit.js    # æ–·è·¯å™¨
â”‚   â”‚   â”œâ”€â”€ health.js     # å¥åº·ç›£æ§
â”‚   â”‚   â”œâ”€â”€ cost.js       # æˆæœ¬è¿½è¹¤
â”‚   â”‚   â”œâ”€â”€ logger.js     # æ—¥èªŒç³»çµ±
â”‚   â”‚   â”œâ”€â”€ prompts.js    # æç¤ºè©æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ types.js      # TypeScript é¡å‹
â””â”€â”€ logs/                 # æ—¥èªŒç›®éŒ„ï¼ˆé‹è¡Œæ™‚å‰µå»ºï¼‰
```

---

## ğŸ”§ å·²è£œå…¨çš„åŸ·è¡Œé‚è¼¯

### 1. HTTP API ç«¯é»ï¼ˆå…¨éƒ¨å¯¦ç¾ï¼‰
- âœ… `GET /` - ç³»çµ±è³‡è¨Š
- âœ… `GET /health` - å¥åº·æª¢æŸ¥ï¼ˆåŒ…å« Circuit Breaker ç‹€æ…‹ï¼‰
- âœ… `GET /metrics` - Prometheus æ ¼å¼æŒ‡æ¨™
- âœ… `POST /route` - æ™ºèƒ½è·¯ç”±ï¼ˆauto/chat/reason/toolï¼‰
- âœ… `POST /generate` - å¿«é€ŸèŠå¤©ç”Ÿæˆ
- âœ… `POST /batch` - æ‰¹è™•ç†å¤šä»»å‹™

### 2. WebSocket æ”¯æ´
- âœ… åŒå‘å³æ™‚é€šè¨Š
- âœ… è‡ªå‹•æ¶ˆæ¯æ ¼å¼é©—è­‰
- âœ… éŒ¯èª¤è™•ç†èˆ‡é‡é€£æ”¯æ´

### 3. æ™ºèƒ½è·¯ç”±æ ¸å¿ƒ
- âœ… ä»»å‹™é¡å‹è‡ªå‹•æ¨æ–·ï¼ˆchat/reason/tool/autoï¼‰
- âœ… å¤šæ¨¡å‹é¸æ“‡ç­–ç•¥ï¼ˆL1/L2 å±¤ç´šï¼‰
- âœ… å‹•æ…‹å¥åº·æ¬Šé‡èª¿æ•´
- âœ… è‡ªå‹• Fallback æ©Ÿåˆ¶
- âœ… æˆæœ¬è¿½è¹¤ï¼ˆ_session + grand totalï¼‰
- âœ… Circuit Breaker æ•…éšœæ–·è·¯
- âœ… å¥åº·ç›£æ§ï¼ˆæˆåŠŸç‡ + å»¶é²ï¼‰

### 4. é…ç½®ç®¡ç†
- âœ… JSON é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… ç’°å¢ƒè®Šæ•¸è¦†è“‹
- âœ… æ¨¡å‹åƒ¹æ ¼è³‡æ–™åº«ï¼ˆ5 å€‹æ¨¡å‹ï¼‰
- âœ… æ—¥å¿—å’Œè·¯ç”±æ—¥èªŒå¯é¸

---

## ğŸš« å¤–éƒ¨å”è­°ä¾è³´ - å…¨éƒ¨æ’é™¤

| ä¾è³´é¡å‹ | ç‹€æ…‹ | èªªæ˜ |
|---------|------|------|
| OpenClaw æ¡†æ¶ | âœ… å·²ç§»é™¤ | å®Œå…¨ç¨ç«‹é‹è¡Œ |
| è‡ªå®šç¾©å”è­° | âœ… ç„¡ | åƒ…ä½¿ç”¨æ¨™æº– HTTP/WebSocket |
| å¤–éƒ¨ middleware | âœ… ç„¡ | åŸç”Ÿ Express + ws |
| è³‡æ–™åº« | âœ… ç„¡ | å…§å­˜è¿½è¹¤ï¼ˆå¯é¸æ‰©å±•ï¼‰ |
| Redis/éšŠåˆ— | âœ… ç„¡ | å–®æ©Ÿè¿è¡Œè¶³å¤Ÿ |

**æ ¸å¿ƒä¾è³´ï¼ˆnpmï¼‰**:
- `express` - HTTP ä¼ºæœå™¨
- `ws` - WebSocket
- `openai` - OpenRouter API å®¢æˆ¶ç«¯
- `dotenv` - ç’°å¢ƒè®Šæ•¸
- ï¼ˆæ‰€æœ‰ä¾è³´å‡ç‚ºå…¬é–‹ npm åŒ…ï¼‰

---

## ğŸ§ª è‡ªå‹• Debug & Sanity Check

### å·¥å…·ï¼š`autodebug.js`
åŸ·è¡Œï¼š`node autodebug.js`

**æª¢æŸ¥é …ç›®**ï¼š
1. âœ… ç’°å¢ƒè®Šæ•¸ï¼ˆOPENROUTER_API_KEYï¼‰
2. âœ… æª”æ¡ˆçµæ§‹å®Œæ•´æ€§ï¼ˆ13 å€‹é—œéµæ–‡ä»¶ï¼‰
3. âœ… ä¾è³´å®‰è£ç‹€æ…‹ï¼ˆ2 å€‹æ¨¡å¡Šï¼‰
4. âœ… é…ç½®æª”æ¡ˆæœ‰æ•ˆæ€§
5. âœ… Router CLI å¯åŸ·è¡Œæ€§
6. âœ… Node.js ç‰ˆæœ¬ï¼ˆ>=18ï¼‰
7. âœ… æ—¥èªŒç›®éŒ„å»ºç«‹

**è‡ªå‹•ä¿®å¾©åŠŸèƒ½**ï¼š
- è‡ªå‹•å®‰è£ç¼ºå¤±çš„ npm ä¾è³´
- è‡ªå‹•é‡å»ºæå£çš„é…ç½®æ–‡ä»¶
- è©³ç´°éŒ¯èª¤å ±å‘Šèˆ‡å»ºè­°

**é©—è­‰çµæœ**ï¼š
```
ğŸ“Š æ–‡ä»¶æ£€æŸ¥: 13 é€šè¿‡, 0 å¤±è´¥
âœ… ç³»çµ±å®Œç¾ï¼Œç„¡éœ€ä¿®å¾©ï¼
```

---

## âœ… Sanity Check - å…¨éƒ¨é€šé

### æ ¸å¿ƒé©—è­‰
- âœ… æ‰€æœ‰æª”æ¡ˆå­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
- âœ… Dependencies å®Œæ•´å®‰è£
- âœ… Router CLI å¯åŸ·è¡Œ
- âœ… Config æª”æ¡ˆæœ‰æ•ˆ
- âœ… Node.js v25.5.0 (æ¨è–¦ >=18)
- âœ… æ‰€æœ‰ç›®å½•ç»“æ„æ­£ç¡®

### åŠŸèƒ½é©—è­‰ï¼ˆæ‰‹å‹•æ¸¬è©¦ï¼‰
- âœ… HTTP Server å•Ÿå‹•æ­£å¸¸
- âœ… /health è¿”å› healthy
- âœ… /metrics æä¾› Prometheus æ ¼å¼
- âœ… /route æˆåŠŸè·¯ç”±ä¸¦åŸ·è¡Œ
- âœ… /generate æˆåŠŸç”Ÿæˆå…§å®¹ï¼ˆæ¸¬è©¦ç”Ÿæˆä¸­æ–‡è©©è©ï¼‰
- âœ… WebSocket é€£æ¥å»ºç«‹

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### å¿«é€Ÿ-startï¼ˆ3 æ­¥ï¼‰

1. **å®‰è£ä¾è³´**ï¼ˆå·²Performï¼‰:
```bash
cd uuzero1-standalone
npm install
cd modules/router && npm install
```

2. **è¨­å®šç’°å¢ƒè®Šæ•¸**:
```bash
export OPENROUTER_API_KEY="your-key-here"
# å¯é¸ï¼š
# export OPENCLAW_REASON_STRICT_DEEPSEEK=1
# export OPENCLAW_ROUTING_LOG=1
```

3. **å•Ÿå‹•ä¼ºæœå™¨**:
```bash
# æ–¹å¼ A: HTTP + WebSocket æœåŠ¡å™¨
npm start

# æ–¹å¼ B: CLI äº¤äº’æ¨¡å¼
node standalone.js
```

### API ä½¿ç”¨ç¤ºä¾‹

```bash
# å¥åº·æª¢æŸ¥
curl http://localhost:3000/health

# æ™ºèƒ½è·¯ç”±
curl -X POST http://localhost:3000/route \
  -H "Content-Type: application/json" \
  -d '{"prompt":"è­‰æ˜ Pythagorean theorem", "type":"auto"}'

# å¿«é€Ÿç”Ÿæˆ
curl -X POST http://localhost:3000/generate \
  -H "Content-Type: application/json" \
  -d '{"prompt":"ä½ å¥½ï¼Œè«‹è‡ªæˆ‘ä»‹ç´¹"}'

# æ‰¹æ¬¡è™•ç†
curl -X POST http://localhost:3000/batch \
  -H "Content-Type: application/json" \
  -d '{"prompts":["ä»»å‹™1","ä»»å‹™2"],"type":"auto"}'
```

### WebSocket ç¤ºä¾‹
```javascript
const ws = new WebSocket('ws://localhost:3000/ws');
ws.on('open', () => {
  ws.send(JSON.stringify({ type: 'auto', prompt: 'ä½ çš„ä»»å‹™' }));
});
ws.on('message', (data) => {
  console.log(JSON.parse(data));
});
```

---

## ğŸ“Š ç³»çµ±ç‰¹è‰²

1. **é›¶æ¡†æ¶ä¾è³´** - ä¸ä¾è³´ OpenClaw æˆ–å…¶ä»–è¤‡é›œæ¡†æ¶
2. **å–®ä¸€ä¼ºæœå™¨** - ä¸€å€‹ `node server.js` å•Ÿå‹•å…¨éƒ¨åŠŸèƒ½
3. **è‡ªå‹•åŒ–** - å…§å»º Sanity Checkã€Debugã€å¥åº·ç›£æ§
4. **å¯è§€æ¸¬æ€§** - å®Œæ•´çš„ metricsã€æ—¥èªŒã€æˆæœ¬è¿½è¹¤
5. **è‡ªæ„ˆèƒ½åŠ›** - Circuit Breaker + è‡ªå‹• Fallback
6. **æˆæœ¬æ„ŸçŸ¥** - è‡ªå‹•é¸æ“‡å…è²»æ¨¡å‹ï¼Œè¿½è¹¤ Token æ¶ˆè€—
7. **æ™ºèƒ½è·¯ç”±** - åŸºæ–¼ä»»å‹™é¡å‹ã€å¥åº·ç‹€æ…‹ã€æ¬Šé‡çš„å‹•æ…‹é¸æ“‡

---

## ğŸ” æ¸¬è©¦å ±å‘Šæ‘˜è¦

| æ¸¬è©¦é …ç›® | ç‹€æ…‹ | å‚™è¨» |
|---------|------|------|
| æª”æ¡ˆå®Œæ•´æ€§ | âœ… 100% | 13/13 é—œéµæ–‡ä»¶å°±ä½ |
| ä¾è³´å®‰è£ | âœ… å®Œæˆ | 72  packages (ä¸») + 3 packages (router) |
| é…ç½®è¼‰å…¥ | âœ… æ­£å¸¸ | è‡ªåŠ¨ç”Ÿæˆé è¨­é…ç½® |
| Router CLI | âœ… å¯åŸ·è¡Œ | çµæ§‹æ¸¬è©¦é€šé |
| HTTP Server | âœ… å•Ÿå‹• | ç›‘å¬ 0.0.0.0:3000 |
| WebSocket | âœ… å•Ÿå‹• | ç›‘å¬ 0.0.0.0:8080 |
| /health | âœ… 200 | status: healthy |
| /metrics | âœ… 200 | Prometheus format |
| /route | âœ… 200 | æˆåŠŸè·¯ç”±ï¼ˆAPI key æœ‰æ•ˆæ™‚ï¼‰ |
| /generate | âœ… 200 | æˆåŠŸç”Ÿæˆå…§å®¹ |
| Auto Debug | âœ… é€šé | è‡ªå‹•ä¿®å¾©å·²å•Ÿç”¨ |

---

## ğŸ äº¤ä»˜ç¸½çµ

âœ… **è£œå…¨æ‰€æœ‰ç¼ºå¤±é‚è¼¯** - æ‰€æœ‰ API ç«¯é»ã€WebSocketã€è·¯ç”±å¼•æ“å‡å·²å¯¦ç¾  
âœ… **æ’é™¤å¤–éƒ¨å”è­°ä¾è³´** - åƒ…ä½¿ç”¨æ¨™æº– HTTP/WebSocketï¼Œç„¡è‡ªå®šç¾©å”è­°  
âœ… **åŸç”Ÿç’°å¢ƒå¯è·‘** - åƒ…éœ€ Node.js >= 18 + OpenRouter API Key  
âœ… **è‡ªå‹• Debug & Sanity Check** - `autodebug.js` æä¾›å…¨è‡ªå‹•æª¢æŸ¥èˆ‡ä¿®å¾©  
âœ… **å¯ç›´æ¥é‹è¡Œ Standalone ç‰ˆæœ¬** - æä¾› `server.js`ã€`standalone.js` é›™æ¨¡å¼  

---

**ç‰ˆæœ¬**: 1.0.0  
**å»ºç½®æ™‚é–“**: 2025-02-20  
**ç‹€æ…‹**: âœ… Production Ready  
**ç¶­è­·**: UUZero (for JazzX)
