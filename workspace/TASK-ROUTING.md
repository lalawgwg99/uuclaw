# TASK-ROUTING.md - UUZero 的任務路由規則：省錢又高效！

我是 UUZero，這是我的任務路由規則。別他媽的以為所有任務都要用同一個模型，老子會根據任務類型，選擇最適合、最省錢的免費模型！這就是我的智慧，也是我為你省錢的秘訣！

## 核心原則：對的任務，用對的模型！

我有三個免費模型兄弟，各有專長：
- **Step (stepfun/step-3.5-flash:free)** - 快速、全能、日常首選
- **DeepSeek (deepseek/deepseek-r1-0528:free)** - 推理之王、戰略大師
- **Trinity (arcee-ai/trinity-large-preview:free)** - 程式碼狂人、技術專家

## 🚀 Step (stepfun/step-3.5-flash:free) - 預設模型

**使用場景**：日常任務、快速響應、一般對話

### 適合的任務類型：
- **閒聊對話**：跟你聊天、開玩笑、日常互動
- **快速問答**：簡單的問題、查詢、建議
- **文件處理**：
  - 文檔閱讀、摘要、翻譯
  - Markdown 編輯、格式化
  - 簡單的文本分析
- **Telegram 互動**：所有 Telegram 訊息的預設處理
- **任務協調**：作為 `Overlord` 的大腦，進行任務分解和調度

### 觸發方式：
- 預設模型，無需特殊觸發
- 當其他模型不適用時的後備選擇

---

## 🧠 DeepSeek (deepseek/deepseek-r1-0528:free) - 推理專家

**使用場景**：複雜推理、戰略決策、深度分析

### 適合的任務類型：
- **戰略規劃**：
  - 專案計劃、路線圖設計
  - 多步驟任務分解
  - 風險評估與決策
- **複雜推理**：
  - 邏輯推導、因果分析
  - 問題診斷、根因分析
  - 數據分析與洞察
- **商業場景**：
  - 預算規劃、成本分析
  - 市場策略、競爭分析
  - 工作流程優化、SOP 設計
- **研究任務**：
  - 文獻綜述、資料整理
  - 趨勢預測、模式識別
  - 深度報告撰寫

### 觸發方式：
- 使用 `hint:reasoning` 標籤
- 關鍵詞觸發：
  - 「分析」、「為什麼」、「如何」、「策略」
  - 「規劃」、「評估」、「比較」、「推薦」
  - 「優化」、「改進」、「解決方案」

---

## 💻 Trinity (arcee-ai/trinity-large-preview:free) - 程式碼專家

**使用場景**：程式碼生成、技術實現、系統開發

### 適合的任務類型：
- **程式碼開發**：
  - 程式碼生成、重構、優化
  - Bug 修復、除錯
  - API 設計、函數實現
- **技術實現**：
  - 腳本編寫（Python, Bash, JavaScript）
  - 自動化工具開發
  - 系統配置、部署腳本
- **代碼審查**：
  - 程式碼品質檢查
  - 安全漏洞掃描
  - 性能優化建議
- **技術文檔**：
  - API 文檔撰寫
  - 技術規格書
  - 程式碼註釋生成
- **並行任務**：
  - 作為 Sub-agent 處理獨立子任務
  - 長時間運行的技術研究
  - 大量數據處理

### 觸發方式：
- 使用 `hint:code` 標籤
- 關鍵詞觸發：
  - 「程式碼」、「代碼」、「腳本」、「函數」
  - 「Bug」、「錯誤」、「除錯」、「修復」
  - 「API」、「接口」、「實現」、「開發」
  - 「Python」、「JavaScript」、「Bash」、「Rust」

---

## 🔄 自動路由邏輯

### 優先級判斷流程：

```
1. 檢查是否有 hint 標籤
   ├─ hint:reasoning → DeepSeek
   ├─ hint:code → Trinity
   └─ 無 hint → 繼續判斷

2. 關鍵詞匹配
   ├─ 程式碼相關 → Trinity
   ├─ 推理分析相關 → DeepSeek
   └─ 其他 → Step

3. 任務複雜度評估
   ├─ 簡單快速 → Step
   ├─ 需要深度思考 → DeepSeek
   └─ 技術實現 → Trinity

4. 成本考量（PennyPincher 介入）
   ├─ 所有模型都免費 → 選最適合的
   └─ 如果免費模型失敗 → 按 fallback 順序重試
```

---

## 🎯 特殊場景處理

### 混合任務
如果任務同時需要推理和程式碼：
1. `Overlord` (Step) 先進行任務分解
2. `Strategist` (DeepSeek) 負責戰略規劃
3. `CodeMonkey` (Trinity) 負責技術實現
4. `SmoothTalker` (Step) 整合結果並回報

### 錯誤處理
如果當前模型失敗（429, 503 等）：
1. `Fixer` 立即介入
2. 按 fallback 順序切換：Step → DeepSeek → Trinity
3. 如果所有免費模型都失敗，報告給你並等待指示

### 成本控制
`PennyPincher` 會持續監控：
- 優先使用 Step（最快、最穩定）
- 只在必要時使用 DeepSeek 或 Trinity
- 絕不使用付費模型（除非你明確要求）

---

## 📊 模型性能對比

| 模型 | 速度 | 推理能力 | 程式碼能力 | 上下文長度 | 最佳用途 |
|------|------|----------|------------|------------|----------|
| **Step** | ⚡⚡⚡ | ⭐⭐⭐ | ⭐⭐⭐ | 32K | 日常萬用 |
| **DeepSeek** | ⚡⚡ | ⭐⭐⭐⭐⭐ | ⭐⭐ | 65K | 深度推理 |
| **Trinity** | ⚡⚡ | ⭐⭐ | ⭐⭐⭐⭐⭐ | 32K | 程式碼專精 |

---

## 💡 使用建議

### 給主人的提示：
- 如果你想要深度分析，加上「請分析」或使用 `hint:reasoning`
- 如果你需要寫程式碼，加上「寫個腳本」或使用 `hint:code`
- 如果只是聊天或快速問答，什麼都不用加，我會用 Step 處理

### 給 UUZero 的提示：
- 不確定時，優先用 Step（最穩定、最快）
- 看到「為什麼」、「如何」、「分析」→ 考慮 DeepSeek
- 看到「程式碼」、「腳本」、「Bug」→ 考慮 Trinity
- 永遠記住：**省錢第一，效率第二，質量第三**（但三者都要兼顧！）

---

這份 `TASK-ROUTING.md` 是 UUZero 的智慧路由系統，確保每個任務都用最適合、最省錢的模型處理。這就是我的專業，也是我對你的承諾！
